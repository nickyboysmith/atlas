<div id="dashboardMeterExposure" class="dashboardMeter">

    <system-feature-information title="dashboard meter maintenance & exposure"
                                controller="DashboardMeterCtrl"
                                open-in-modal="true"
                                view-path="/app/components/dashboardMeter/update"
                                page-name="Dashboard Meter Maintenance & Exposure"></system-feature-information>


    <div class="Title row">
        <h2>Dashboad Meter Maintenance & Exposure</h2>
    </div>

    <form class="form-horizontal row" role="form">

        <div class='col-sm-12 form-group'>
            <div class="col-sm-12">
                <label>Dashboard Meters</label>
            </div>
           
        </div>

        <div class='col-sm-12 form-group'>
            <!--1st column starts-->
            <div class='col-sm-3'>
                <div class="sml-scroll-div">
                    <table class="table table-hover table-bordered">
                        <thead>

                        </thead>
                        <tbody>
                            <tr ng-repeat="meter in dashboardMeters">
                                <td ng-click="selectMeterDetails(meter.Id)" ng-class="{selectedMeter : selectedMeter == meter.Id}" value="{{meter.Id}}">
                                    {{meter.Name}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!--2nd column starts-->
            <div class='col-sm-6'>


                <div class='col-sm-12 form-group'>
                    <div class='form-line-holder'>
                        <div class='col-sm-2'>
                            <label>Meter:</label>
                        </div>
                        <div class='col-sm-10'>
                            <input class="form-control" type="text" ng-model="dashboardMeterDetails.Name" ng-disabled="true" placeholder="Meter Name" />
                        </div>
                    </div>
                </div>
                <div class='col-sm-12 form-group'>
                    <div class='form-line-holder'>
                        <div class='col-sm-2'>
                            <label>Title:</label>
                        </div>
                        <div class='col-sm-10'>
                            <input class="form-control" type="text" ng-model="dashboardMeterDetails.Title" ng-disabled="false" placeholder="Meter Title" />
                        </div>
                    </div>
                </div>
                <div class='col-sm-12 form-group'>
                    <div class='form-line-holder'>
                        <div class='col-sm-2'></div>
                        <div class='col-sm-10'>
                            <textarea rows="4" class="form-control" type="text" placeholder="Description" ng-model="dashboardMeterDetails.Description"></textarea>
                        </div>
                    </div>
                </div>
                <div class='col-sm-12 form-group'>
                    <div class='form-line-holder'>
                        <div class='col-sm-2'>
                            <label>Refresh:</label>
                        </div>
                        <div class='col-sm-4'>
                            <input class="form-control" type="text" ng-model="dashboardMeterDetails.RefreshRate" ng-disabled="false" placeholder="Refresh" />
                        </div>
                        <div class='col-sm-6'>
                            (seconds)
                        </div>
                    </div>
                </div>
                <div class='col-sm-12 form-group'>
                    <div class='form-line-holder'>
                        <div class='col-sm-2'></div>
                        <div class='col-sm-2'>
                            <input type="checkbox" ng-model="dashboardMeterDetails.Disabled" />
                        </div>
                        <div class='col-sm-8 blueitalic'>Disabled</div>
                    </div>
                </div>

                <div class='col-sm-12 form-group'>
                    <div class='form-line-holder'>
                        <div class='col-sm-2'></div>
                        <div class='col-sm-4'>
                            <button class="btn btn-default btn-sm pull-left" ng-click="save()" ng-disabled="selectedMeter == null || isAdmin == false">Save</button>
                        </div>
                        <div class='col-sm-6'> </div>
                    </div>
                </div>
            </div>
            <!--3rd Column Starts-->
            <div class='col-sm-3'>

                <div class='col-sm-12 form-group'>
                    <div class='form-line-holder'>
                        <div class='col-sm-9'>
                            <label>Exposed to Organisations:</label>
                        </div>
                        <div class='col-sm-3'>
                            <button class="btn btn-default btn-sm pull-left" ng-click="openOrganisationExposureModal()" ng-disabled="selectedMeter == null || isAdmin == false">Edit</button>
                        </div>
                    </div>
                </div>
               
                <table class="table table-hover table-bordered">
                    <thead>

                    </thead>
                    <tbody>
                        <tr ng-repeat="organisation in exposedOrganisations">
                            <td value="{{organisation.Id}}">
                                {{organisation.Name}}
                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>
        </div>

        <div data-ng-if="showSuccessFader == true">
            <my-msgfader status="success"></my-msgfader>
        </div>
        <div data-ng-if="showErrorFader == true">
            <my-msgfader status="error"></my-msgfader>
        </div>

        <!--Message banner-->
        <div class="row">
            <div class="col-sm-12" ng-if="successMessage != ''">
                <h3>{{ successMessage }}</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12" ng-if="validationMessage != ''">
                <h3>{{ validationMessage }}</h3>
            </div>
        </div>

    </form>
</div>